<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smart Finance Planner</title>

<!-- Font & icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  :root{
    --bg: #0f1724;            /* page background for premium look */
    --card: #0b1220;
    --muted: #93a3b8;
    --accent1: #0667d0;      /* blue */
    --accent2: #06b6d4;      /* cyan */
    --glass: rgba(255,255,255,0.04);
  }
  [data-theme="light"]{
    --bg: #f6f8fb;
    --card: #ffffff;
    --muted: #6b7280;
  }
  html,body{height:100%}
  body{
    font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background: linear-gradient(180deg,#07122b 0%, #071a2f 60%); /* dark gradient base */
    color: #e6eef8;
    transition: background .25s, color .25s;
    -webkit-font-smoothing:antialiased;
  }

  /* Light theme overrides */
  [data-theme="light"] body {
    background: linear-gradient(180deg,#f6f8fb 0%, #eef2ff 60%);
    color: #0b1220;
  }

  /* NAV */
  .nav-gradient {
    background: linear-gradient(90deg,var(--accent1), var(--accent2));
    box-shadow: 0 8px 30px rgba(2,6,23,0.45);
  }
  [data-theme="light"] .nav-gradient {
    box-shadow: 0 6px 18px rgba(16,24,40,0.06);
  }

  /* Cards */
  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: 14px;
    padding: 18px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.5);
    backdrop-filter: blur(6px);
    transition: transform .18s, box-shadow .18s;
  }
  [data-theme="light"] .card {
    background: var(--card);
    box-shadow: 0 8px 24px rgba(16,24,40,0.06);
  }
  .card:hover{ transform: translateY(-6px); box-shadow: 0 18px 40px rgba(2,6,23,0.6); }

  .muted{ color: var(--muted); }
  .tiny{ font-size:.85rem; color:var(--muted); }

  /* accent pill */
  .pill {
    display:inline-block;
    padding:6px 10px;
    border-radius:999px;
    background: rgba(255,255,255,0.06);
    color: #cfe9ff;
    font-weight:600;
    font-size:.8rem;
  }
  [data-theme="light"] .pill{ background: #eef2ff; color: #0b1220; }

  /* chart container */
  .chart-wrap{ height:320px; padding:14px; border-radius:12px; background: transparent; }

  /* table */
  .tx-table th, .tx-table td { padding:12px 14px; border-bottom:1px solid rgba(255,255,255,0.03); }
  [data-theme="light"] .tx-table th, [data-theme="light"] .tx-table td { border-bottom:1px solid rgba(0,0,0,0.06); }

  /* buttons */
  .btn-primary {
    background: linear-gradient(90deg,var(--accent2),var(--accent1));
    color: white; padding:.55rem .9rem; border-radius:10px; font-weight:600;
    box-shadow: 0 8px 22px rgba(6,103,208,0.18);
  }
  .btn-ghost { background: rgba(255,255,255,0.03); color: #dbeafe; padding:.45rem .8rem; border-radius:10px; }

  /* responsive tweaks */
  @media (max-width:1024px){
    .chart-wrap{ height:260px }
  }
  @media (max-width:640px){
    .card { padding:14px; }
    .chart-wrap{ height:220px; }
  }
</style>
</head>

<body data-theme="dark">

<!-- NAVBAR -->
<header class="fixed w-full z-50">
  <div class="nav-gradient px-6 py-3">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="text-2xl font-bold">Smart Finance Planner</div>
      </div>

      <div class="flex items-center gap-3">
        <button id="exportCsvBtn" class="btn-ghost tiny hover:opacity-90"><i class="fa-solid fa-file-export mr-2"></i>Export CSV</button>
        <button id="resetBtn" class="btn-ghost tiny hover:opacity-90"><i class="fa-solid fa-trash mr-2"></i>Reset</button>
        <button id="themeToggle" title="Toggle theme" class="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/12 transition">
          <i class="fa-solid fa-circle-half-stroke"></i>
        </button>
      </div>
    </div>
  </div>
</header>

<main class="pt-28 max-w-7xl mx-auto px-6 pb-12">

  <!-- KPI Cards -->
  <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="card p-6">
      <div class="flex justify-between items-start">
        <div>
          <div class="tiny">Total Pemasukan</div>
          <div id="totalIncome" class="text-2xl font-semibold mt-2">Rp 0</div>
          <div id="incomeChange" class="tiny mt-1 muted">—</div>
        </div>
        <div class="text-3xl text-cyan-400"><i class="fa-solid fa-arrow-up-right-from-square"></i></div>
      </div>
      <div class="tiny mt-4 muted">Total semua pemasukan tercatat.</div>
    </div>

    <div class="card p-6">
      <div class="flex justify-between items-start">
        <div>
          <div class="tiny">Total Pengeluaran</div>
          <div id="totalExpense" class="text-2xl font-semibold mt-2">Rp 0</div>
          <div id="expenseChange" class="tiny mt-1 muted">—</div>
        </div>
        <div class="text-3xl text-pink-400"><i class="fa-solid fa-arrow-down-right-dots"></i></div>
      </div>
      <div class="tiny mt-4 muted">Total semua pengeluaran tercatat.</div>
    </div>

    <div class="card p-6">
      <div class="flex justify-between items-start">
        <div>
          <div class="tiny">Sisa Saldo</div>
          <div id="balance" class="text-2xl font-semibold mt-2">Rp 0</div>
          <div id="savingsRate" class="tiny mt-1 muted">Rate: 0%</div>
        </div>
        <div class="text-3xl text-amber-400"><i class="fa-solid fa-wallet"></i></div>
      </div>
      <div class="tiny mt-4 muted">Sisa = Pemasukan − Pengeluaran.</div>
    </div>
  </section>

  <!-- Input + Quick summary -->
  <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
    <div class="card p-6 lg:col-span-2">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h3 class="text-lg font-semibold">Tambah Transaksi</h3>
          <p class="tiny muted">Catat pemasukan atau pengeluaran</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <select id="txType" class="p-3 border border-white/6 rounded-lg bg-transparent">
          <option value="expense">Pengeluaran</option>
          <option value="income">Pemasukan</option>
        </select>

        <input id="txAmount" type="number" placeholder="Nominal (Rp)" class="p-3 border border-white/6 rounded-lg bg-transparent" />

        <input id="txDate" type="date" class="p-3 border border-white/6 rounded-lg bg-transparent" />

        <select id="txCategory" class="p-3 border border-white/6 rounded-lg bg-transparent">
          <option value="auto">Auto category</option>
          <option value="food">food</option>
          <option value="transport">transport</option>
          <option value="entertainment">entertainment</option>
          <option value="shopping">shopping</option>
          <option value="bills">bills</option>
          <option value="salary">salary</option>
          <option value="other">other</option>
        </select>

        <input id="txDesc" placeholder="Deskripsi (mis. beli pulsa)" class="p-3 border border-white/6 rounded-lg md:col-span-3 bg-transparent" />

        <div class="md:col-span-3 flex gap-3">
          <button id="addTxBtn" class="btn-primary">Tambah</button>
          <button id="addSampleBtn" class="btn-ghost border border-white/6">Tambah Sample</button>
          <button id="exportBtn" class="btn-ghost border border-white/6 ml-auto">Export CSV</button>
        </div>
      </div>

    </div>

    <!-- Quick summary -->
    <aside class="card p-6">
      <h4 class="font-semibold">Ringkasan Hari Ini</h4>
      <div class="mt-3 tiny muted">Pemasukan hari ini</div>
      <div id="todayIncome" class="text-xl font-semibold mt-1">Rp 0</div>

      <div class="mt-3 tiny muted">Pengeluaran hari ini</div>
      <div id="todayExpense" class="text-xl font-semibold mt-1">Rp 0</div>

      <div class="mt-3 tiny muted">Sisa hari ini</div>
      <div id="todayBalance" class="text-xl font-semibold mt-1">Rp 0</div>

      <hr class="my-4 border-white/6" />

      <h5 class="font-semibold">Top Categories (expense)</h5>
      <ul id="topCategories" class="mt-3 tiny muted space-y-2"></ul>
    </aside>
  </section>

  <!-- Charts -->
  <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <div class="card chart-wrap p-4">
      <div class="flex justify-between items-center mb-3">
        <div><strong>Pemasukan — Bulanan (Line)</strong></div>
        <div class="tiny muted">Per hari (1–31)</div>
      </div>
      <canvas id="incomeLine"></canvas>
    </div>

    <div class="card chart-wrap p-4">
      <div class="flex justify-between items-center mb-3">
        <div><strong>Pengeluaran — Bulanan (Bar)</strong></div>
        <div class="tiny muted">Per hari (1–31)</div>
      </div>
      <canvas id="expenseBar"></canvas>
    </div>
  </section>

  <!-- Transactions -->
  <section class="card p-6 mb-8">
    <div class="flex items-center justify-between mb-4">
      <div>
        <h3 class="text-lg font-semibold">Riwayat Transaksi</h3>
        <p class="tiny muted">Urut terbaru di atas • cari & filter tersedia</p>
      </div>

      <div class="flex items-center gap-2">
        <input id="searchInput" placeholder="Cari deskripsi / kategori" class="p-2 border border-white/6 rounded-lg bg-transparent" />
        <select id="filterCategory" class="p-2 border border-white/6 rounded-lg bg-transparent">
          <option value="">Semua kategori</option>
          <option value="food">food</option>
          <option value="transport">transport</option>
          <option value="entertainment">entertainment</option>
          <option value="shopping">shopping</option>
          <option value="bills">bills</option>
          <option value="salary">salary</option>
          <option value="other">other</option>
        </select>
        <select id="filterType" class="p-2 border border-white/6 rounded-lg bg-transparent">
          <option value="">Semua</option>
          <option value="income">Pemasukan</option>
          <option value="expense">Pengeluaran</option>
        </select>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full tx-table">
        <thead>
          <tr class="text-left tiny muted">
            <th>Tanggal</th>
            <th>Deskripsi</th>
            <th>Kategori</th>
            <th class="text-right">Jumlah</th>
            <th>Jenis</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="txTbody"></tbody>
      </table>
    </div>
  </section>

  <!-- About -->
  <!-- About -->
<section class="card p-6 mb-10">
  <h3 class="font-semibold text-xl mb-2">Tentang Aplikasi</h3>

  <p class="tiny muted mt-2 leading-relaxed">
    <strong>Smart Finance Planner</strong> adalah platform manajemen keuangan pribadi yang dirancang 
    untuk membantu pengguna mengontrol pemasukan, pengeluaran, serta perkembangan saldo secara 
    efisien. Aplikasi ini memanfaatkan visualisasi data interaktif untuk memberikan pemahaman yang 
    lebih jelas mengenai pola finansial pengguna.
  </p>

  <p class="tiny muted mt-3 leading-relaxed">
    Dengan antarmuka modern khas aplikasi fintech, Smart Finance Planner menyajikan dashboard 
    ringkas yang menampilkan informasi penting seperti total pemasukan, total pengeluaran, 
    saldo berjalan, pengeluaran harian, serta tren finansial bulanan melalui grafik dinamis.
  </p>

  <p class="tiny muted mt-3 leading-relaxed">
    Seluruh transaksi dicatat secara real-time dan ditampilkan dalam riwayat yang mudah 
    diakses serta dilengkapi fitur pencarian cepat. Data pengguna disimpan secara lokal 
    sehingga tetap aman, ringan, dan dapat digunakan kapan pun tanpa ketergantungan koneksi 
    internet.
  </p>

  <p class="tiny muted mt-3 leading-relaxed">
    Smart Finance Planner dikembangkan sebagai solusi praktis untuk membantu pengguna 
    merencanakan, memantau, dan memahami kondisi finansial mereka dengan cara yang sederhana, 
    efektif, dan profesional.
  </p>
</section>


  <footer class="tiny muted text-center mb-6">© Smart Finance Planner</footer>
</main>

<!-- Scripts -->
<script>
/* ---------- Data model & storage ---------- */
const STORAGE_KEY = 'sfp_v1_data';
let transactions = []; // {id, date (YYYY-MM-DD), desc, category, type, amount}

/* ---------- Utilities ---------- */
const fmt = n => 'Rp ' + Number(n).toLocaleString('id-ID');
const uid = ()=> Date.now().toString(36) + Math.random().toString(36).slice(2,7);
const todayStr = ()=> (new Date()).toISOString().split('T')[0];

/* ---------- DOM refs ---------- */
const totalIncomeEl = document.getElementById('totalIncome');
const totalExpenseEl = document.getElementById('totalExpense');
const balanceEl = document.getElementById('balance');
const savingsRateEl = document.getElementById('savingsRate');
const txTbody = document.getElementById('txTbody');
const searchInput = document.getElementById('searchInput');
const filterCategory = document.getElementById('filterCategory');
const filterType = document.getElementById('filterType');
const todayIncomeEl = document.getElementById('todayIncome');
const todayExpenseEl = document.getElementById('todayExpense');
const todayBalanceEl = document.getElementById('todayBalance');
const topCategoriesEl = document.getElementById('topCategories');

/* ---------- Initialize form defaults ---------- */
document.getElementById('txDate').value = todayStr();

/* ---------- Load / Save ---------- */
function load(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    transactions = raw ? JSON.parse(raw) : [];
  }catch(e){ transactions = []; }
}
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(transactions)); }

/* ---------- Auto category (simple rule-based) ---------- */
const keywordMap = {
  food:['makan','warung','kafe','resto','jajan','nasi','bakso','mie','ramen','minum','kopi'],
  transport:['gojek','grab','taksi','bensin','tol','bus','kereta','bbm','ojek','tiket'],
  entertainment:['bioskop','netflix','movie','game','hiburan','konser'],
  shopping:['tokopedia','shopee','indomart','alfamart','belanja','pakaian','sepatu'],
  bills:['listrik','listrik','air','internet','tagihan','pln','pdam'],
  salary:['gaji','salary','honor','bayar gaji']
};
function autoCategory(desc){
  if(!desc) return 'other';
  const d = desc.toLowerCase();
  for(const cat in keywordMap){
    for(const kw of keywordMap[cat]) if(d.includes(kw)) return cat;
  }
  return 'other';
}

/* ---------- Summary & charts data ---------- */
let dailyIncome = Array(31).fill(0);
let dailyExpense = Array(31).fill(0);

// Chart instances
let incomeLineChart = null;
let expenseBarChart = null;

function rebuildDailyArrays(){
  dailyIncome = Array(31).fill(0);
  dailyExpense = Array(31).fill(0);
  transactions.forEach(tx=>{
    const dt = new Date(tx.date);
    const idx = dt.getDate()-1;
    if(idx>=0 && idx<31){
      if(tx.type === 'income') dailyIncome[idx] += Number(tx.amount);
      else dailyExpense[idx] += Number(tx.amount);
    }
  });
}

/* ---------- Render functions ---------- */
function renderSummary(){
  const income = transactions.filter(t=>t.type==='income').reduce((s,t)=>s+Number(t.amount),0);
  const expense = transactions.filter(t=>t.type==='expense').reduce((s,t)=>s+Number(t.amount),0);
  const balance = income - expense;
  const rate = income>0 ? ( (income-expense)/income * 100) : 0;

  totalIncomeEl.innerText = fmt(income);
  totalExpenseEl.innerText = fmt(expense);
  balanceEl.innerText = fmt(balance);
  savingsRateEl && (savingsRateEl.innerText = 'Rate: ' + rate.toFixed(1) + '%');
}

function renderTodaySummary(){
  const d = todayStr();
  const inc = transactions.filter(t=>t.date===d && t.type==='income').reduce((s,t)=>s+Number(t.amount),0);
  const exp = transactions.filter(t=>t.date===d && t.type==='expense').reduce((s,t)=>s+Number(t.amount),0);
  todayIncomeEl.innerText = fmt(inc);
  todayExpenseEl.innerText = fmt(exp);
  todayBalanceEl.innerText = fmt(inc-exp);
}

function renderTopCategories(){
  const sums = {};
  transactions.filter(t=>t.type==='expense').forEach(t=> sums[t.category] = (sums[t.category]||0) + Number(t.amount));
  const sorted = Object.entries(sums).sort((a,b)=>b[1]-a[1]).slice(0,6);
  topCategoriesEl.innerHTML = '';
  sorted.forEach(([cat,amt])=>{
    const li = document.createElement('li');
    li.className = 'flex justify-between';
    li.innerHTML = `<span class="capitalize">${cat}</span><span class="muted">${fmt(amt)}</span>`;
    li.style.cursor = 'pointer';
    li.onclick = ()=> { filterCategory.value = cat; renderTable(); };
    topCategoriesEl.appendChild(li);
  });
  if(sorted.length===0) topCategoriesEl.innerHTML = '<div class="tiny muted">Tidak ada data pengeluaran</div>';
}

function renderTable(){
  const q = (searchInput.value||'').toLowerCase();
  const catF = filterCategory.value;
  const typeF = filterType.value;

  const rows = transactions
    .filter(t=>{
      if(catF && t.category !== catF) return false;
      if(typeF && t.type !== typeF) return false;
      if(q){
        return (t.desc && t.desc.toLowerCase().includes(q)) || (t.category && t.category.toLowerCase().includes(q));
      }
      return true;
    })
    .sort((a,b)=> new Date(b.date) - new Date(a.date));

  txTbody.innerHTML = '';
  rows.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${r.date}</td>
      <td>${escapeHtml(r.desc)}</td>
      <td class="capitalize">${r.category}</td>
      <td class="text-right">${fmt(r.amount)}</td>
      <td>${r.type}</td>
      <td><button class="px-2 py-1 text-sm rounded-md border" onclick="deleteTx('${r.id}')">Hapus</button></td>
    `;
    txTbody.appendChild(tr);
  });
}

/* ---------- Chart setup ---------- */
function initCharts(){
  const days = Array.from({length:31}, (_,i)=>i+1);
  const incomeCtx = document.getElementById('incomeLine').getContext('2d');
  const expenseCtx = document.getElementById('expenseBar').getContext('2d');

  incomeLineChart && incomeLineChart.destroy();
  expenseBarChart && expenseBarChart.destroy();

  incomeLineChart = new Chart(incomeCtx, {
    type:'line',
    data:{ labels:days, datasets:[{ label:'Pemasukan', data:dailyIncome, borderColor:'#06b6d4', backgroundColor:'rgba(6,182,212,0.12)', tension:0.25, fill:true, pointRadius:3 }]},
    options:{ maintainAspectRatio:false, plugins:{ legend:{display:true, labels:{color: getComputedStyle(document.body).color}} }, scales:{ y:{ beginAtZero:true, ticks:{color: getComputedStyle(document.body).color} }, x:{ ticks:{color: getComputedStyle(document.body).color} } } }
  });

  expenseBarChart = new Chart(expenseCtx, {
    type:'bar',
    data:{ labels:days, datasets:[{ label:'Pengeluaran', data:dailyExpense, backgroundColor:'#fb7185' }]},
    options:{ maintainAspectRatio:false, plugins:{ legend:{display:true, labels:{color: getComputedStyle(document.body).color}} }, scales:{ y:{ beginAtZero:true, ticks:{color: getComputedStyle(document.body).color} }, x:{ ticks:{color: getComputedStyle(document.body).color} } } }
  });
}

/* ---------- Actions: add / delete / reset / export ---------- */
document.getElementById('addTxBtn').addEventListener('click', ()=> {
  const type = document.getElementById('txType').value;
  const amount = Number(document.getElementById('txAmount').value);
  const date = document.getElementById('txDate').value || todayStr();
  let category = document.getElementById('txCategory').value;
  const desc = (document.getElementById('txDesc').value || (type==='income'?'Pemasukan':'Pengeluaran')).trim();

  if(!amount || amount <= 0){ alert('Masukkan nominal valid.'); return; }
  if(category === 'auto') category = autoCategory(desc);

  const tx = { id: uid(), date, desc, category, type, amount };
  transactions.push(tx);
  save();
  refreshAll();
  // clear inputs
  document.getElementById('txAmount').value = '';
  document.getElementById('txDesc').value = '';
});

function deleteTx(id){
  if(!confirm('Hapus transaksi?')) return;
  transactions = transactions.filter(t=>t.id !== id);
  save();
  refreshAll();
}

document.getElementById('resetBtn').addEventListener('click', ()=> {
  if(!confirm('Reset semua data?')) return;
  transactions = [];
  save();
  refreshAll();
});

document.getElementById('exportBtn').addEventListener('click', ()=> exportCsv());
document.getElementById('exportCsvBtn').addEventListener('click', ()=> exportCsv());

document.getElementById('addSampleBtn').addEventListener('click', ()=> {
  const sample = [
    { id:uid(), date: todayStr(), desc:'Gaji Bulan Apr', category:'salary', type:'income', amount:8500000 },
    { id:uid(), date: todayStr(), desc:'Belanja Bulanan', category:'shopping', type:'expense', amount:1200000 },
    { id:uid(), date: todayStr(), desc:'Makan Siang', category:'food', type:'expense', amount:50000 },
    { id:uid(), date: todayStr(), desc:'TopUp Transport', category:'transport', type:'expense', amount:70000 },
    { id:uid(), date: todayStr(), desc:'Netflix', category:'entertainment', type:'expense', amount:75000 }
  ];
  transactions.push(...sample);
  save();
  refreshAll();
});

/* ---------- Export CSV ---------- */
function exportCsv(){
  if(transactions.length === 0){ alert('Tidak ada data.'); return; }
  const header = ['id','date','desc','category','type','amount'];
  const rows = transactions.map(t => header.map(h => `"${String(t[h]||'').replace(/"/g,'""')}"`).join(','));
  const csv = [header.join(',')].concat(rows).join('\n');
  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'sfp_transactions.csv'; a.click(); URL.revokeObjectURL(url);
}

/* ---------- Helpers ---------- */
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* ---------- Filter listeners ---------- */
searchInput.addEventListener('input', renderTable);
filterCategory.addEventListener('change', renderTable);
filterType.addEventListener('change', renderTable);

/* ---------- Theme toggle ---------- */
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', ()=>{
  const body = document.body;
  const cur = body.getAttribute('data-theme') || 'dark';
  const next = cur === 'dark' ? 'light' : 'dark';
  body.setAttribute('data-theme', next);
  if(next === 'light'){
    document.body.style.background = '';
  }
  localStorage.setItem('sfp_theme', next);
});
(function restoreTheme(){
  const t = localStorage.getItem('sfp_theme') || 'dark';
  document.body.setAttribute('data-theme', t);
})();

/* ---------- Refresh all UI ---------- */
function refreshAll(){
  rebuildDailyArrays();
  initCharts();
  renderSummary();
  renderTable();
  renderTodaySummary();
  renderTopCategories();
}

/* ---------- Init ---------- */
load();
refreshAll();

/* ---------- ensure chart resizes ---------- */
window.addEventListener('resize', ()=> { incomeLineChart && incomeLineChart.resize(); expenseBarChart && expenseBarChart.resize(); });

</script>
</body>
</html>
